@model IEnumerable<GaoXiao_Final.Models.LendingStatu>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<div id="calendar"></div>

<link href='fullcalendar/main.css' rel='stylesheet' />

@section script{
    <script src="fullcalendar/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth'
            });
            calendar.render();
        });

        /*$(document).ready(function () {
            function GenerateCalendar(events) {
                $('#calendar').fullCalendar('destroy');
                $('#calendar').fullCalendar({
                    contentHeight: 400,
                    defaultDate: new Date(),
                    timeFormat: 'h(:)'
                })
            }
        })*/
    </script>
}


<div class="calendar">
    <div class="timeline">
        <div class="spacer"></div>
        <div class="time-marker">8 AM</div>
        <div class="time-marker">9 AM</div>
        <div class="time-marker">10 AM</div>
        <div class="time-marker">11 AM</div>
        <div class="time-marker">12 PM</div>
        <div class="time-marker">1 PM</div>
        <div class="time-marker">2 PM</div>
        <div class="time-marker">3 PM</div>
        <div class="time-marker">4 PM</div>
        <div class="time-marker">5 PM</div>
        <div class="time-marker">6 PM</div>
        <div class="time-marker">7 PM</div>
        <div class="time-marker">8 PM</div>
        <div class="time-marker">9 PM</div>
    </div>

    
    <div class="days">
        <div class="day">
            <div class="date">
                <p class="date-num">@DateTime.Now.ToString("dd")</p>
                <p class="date-day">@DateTime.Now.ToString("ddd")</p>
            </div>

            <div class="events">
                @foreach (var item in Model)
                {
                    if (item.StartTime.ToString("MM/dd/yyyy").Equals(DateTime.Now.ToString("MM/dd/yyyy")))
                    {
                        <div class="event start-@item.StartTime.Hour end-@item.EndTime.Hour">
                            <p class="title">@item.User.Name.ToString().Substring(0,1) O O</p>
                            <p class="time">@item.StartTime.ToString("HH ':' mm") - @item.EndTime.ToString("HH ':' mm")</p>
                            <p>@Html.ActionLink("Details", "Details", new { id = item.LendingID })</p>
                        </div>
                    }
                }
            </div>
        </div>

        <div class="day">
            <div class="date">
                <p class="date-num">@DateTime.Now.AddDays(1).ToString("dd")</p>
                <p class="date-day">@DateTime.Now.AddDays(1).ToString("ddd")</p>
            </div>
            <div class="events">
                @foreach (var item in Model)
                {
                    if (item.StartTime.ToString("MM/dd/yyyy").Equals(DateTime.Now.AddDays(1).ToString("MM/dd/yyyy")))
                    {
                        <div class="event start-@item.StartTime.Hour end-@item.EndTime.Hour">
                            <p class="title">@item.User.Name.ToString().Substring(0, 1) O O</p>
                            <p class="time">@item.StartTime.ToString("HH ':' mm") - @item.EndTime.ToString("HH ':' mm")</p>
                            <p>@Html.ActionLink("Details", "Details", new { id = item.LendingID })</p>
                        </div>
                    }
                }
            </div>
        </div>

        <div class="day">
            <div class="date">
                <p class="date-num">@DateTime.Now.AddDays(2).ToString("dd")</p>
                <p class="date-day">@DateTime.Now.AddDays(2).ToString("ddd")</p>
            </div>
            <div class="events">
                @foreach (var item in Model)
                {
                    if (item.StartTime.ToString("MM/dd/yyyy").Equals(DateTime.Now.AddDays(2).ToString("MM/dd/yyyy")))
                    {
                        <div class="event start-@item.StartTime.Hour end-@item.EndTime.Hour">
                            <p class="title">@item.User.Name.ToString().Substring(0, 1) O O</p>
                            <p class="time">@item.StartTime.ToString("HH ':' mm") - @item.EndTime.ToString("HH ':' mm")</p>
                            <p>@Html.ActionLink("Details", "Details", new { id = item.LendingID })</p>
                        </div>
                    }
                }
            </div>
        </div>

        <div class="day">
            <div class="date">
                <p class="date-num">@DateTime.Now.AddDays(3).ToString("dd")</p>
                <p class="date-day">@DateTime.Now.AddDays(3).ToString("ddd")</p>
            </div>
            <div class="events">
                @foreach (var item in Model)
                {
                    if (item.StartTime.ToString("MM/dd/yyyy").Equals(DateTime.Now.AddDays(3).ToString("MM/dd/yyyy")))
                    {
                        <div class="event start-@item.StartTime.Hour end-@item.EndTime.Hour">
                            <p class="title">@item.User.Name.ToString().Substring(0, 1) O O</p>
                            <p class="time">@item.StartTime.ToString("HH ':' mm") - @item.EndTime.ToString("HH ':' mm")</p>
                            <p>@Html.ActionLink("Details", "Details", new { id = item.LendingID })</p>
                        </div>
                    }
                }
            </div>
        </div>
        <div class="day">
            <div class="date">
                <p class="date-num">@DateTime.Now.AddDays(4).ToString("dd")</p>
                <p class="date-day">@DateTime.Now.AddDays(4).ToString("ddd")</p>
            </div>
            <div class="events">
                @foreach (var item in Model)
                {
                    if (item.StartTime.ToString("MM/dd/yyyy").Equals(DateTime.Now.AddDays(4).ToString("MM/dd/yyyy")))
                    {
                        <div class="event start-@item.StartTime.Hour end-@item.EndTime.Hour">
                            <p class="title">@item.User.Name.ToString().Substring(0, 1) O O</p>
                            <p class="time">@item.StartTime.ToString("HH ':' mm") - @item.EndTime.ToString("HH ':' mm")</p>
                            <p>@Html.ActionLink("Details", "Details", new { id = item.LendingID })</p>
                        </div>
                    }
                }
            </div>
        </div>
    </div>

    <style>
        :root {
            --numDays: 5;
            --numHours: 14;
            --timeHeight: 60px;
            --calBgColor: #fff1f8;
            --eventBorderColor: #f2d3d8;
            --eventColor1: #ffd6d1;
            --eventColor2: #fafaa3;
            --eventColor3: #e2f8ff;
            --eventColor4: #d1ffe6;
        }

        .calendar {
            display: grid;
            gap: 10px;
            grid-template-columns: auto 1fr;
            margin: 2rem;
        }

        .timeline {
            display: grid;
            grid-template-rows: repeat(var(--numHours), var(--timeHeight));
        }

        .days {
            display: grid;
            grid-column: 2;
            gap: 5px;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        }

        .events {
            display: grid;
            grid-template-rows: repeat(var(--numHours), var(--timeHeight));
            border-radius: 5px;
            background: var(--calBgColor);
        }

        .start-8 {
            grid-row-start: 1;
        }

        .start-9 {
            grid-row-start: 2;
        }

        .start-10 {
            grid-row-start: 3;
        }

        .start-11 {
            grid-row-start: 4;
        }

        .start-12 {
            grid-row-start: 5;
        }

        .start-13 {
            grid-row-start: 6;
        }

        .start-14 {
            grid-row-start: 7;
        }

        .start-15 {
            grid-row-start: 8;
        }

        .start-16 {
            grid-row-start: 9;
        }

        .start-17 {
            grid-row-start: 10;
        }

        .start-18 {
            grid-row-start: 11;
        }

        .start-19 {
            grid-row-start: 12;
        }

        .start-20 {
            grid-row-start: 13;
        }

        .end-9 {
            grid-row-end: 2;
        }

        .end-10 {
            grid-row-end: 3;
        }

        .end-11 {
            grid-row-end: 4;
        }

        .end-12 {
            grid-row-end: 5;
        }

        .end-13 {
            grid-row-end: 6;
        }

        .end-14 {
            grid-row-end: 7;
        }

        .end-15 {
            grid-row-end: 8;
        }

        .end-16 {
            grid-row-end: 9;
        }

        .end-17 {
            grid-row-end: 10;
        }

        .end-18 {
            grid-row-end: 11;
        }

        .end-19 {
            grid-row-end: 12;
        }

        .end-20 {
            grid-row-end: 13;
        }

        .end-21 {
            grid-row-end: 14;
        }

        .title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .event {
            border: 1px solid var(--eventBorderColor);
            border-radius: 5px;
            padding: 0.5rem;
            margin: 0 0.5rem;
            background: white;
        }

        .spacer,
        .date {
            height: 60px;
        }

        body {
            font-family: system-ui, sans-serif;
        }

        .corp-fi {
            background: var(--eventColor1);
        }

        .ent-law {
            background: var(--eventColor2);
        }

        .writing {
            background: var(--eventColor3);
        }

        .securities {
            background: var(--eventColor4);
        }

        .date {
            display: flex;
            gap: 1em;
        }

        .date-num {
            font-size: 3rem;
            font-weight: 600;
            display: contents;
        }

        .date-day {
            display: contents;
            font-size: 3rem;
            font-weight: 100;
        }
    </style>
